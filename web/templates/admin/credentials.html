{% extends "base.html" %}

{% block title %}Manage Credentials - WhatDoesThisBoxDo{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Server Credentials</h1>
    <div class="page-actions">
        <a href="{{ url_for('admin_add_credential') }}" class="btn btn-primary">Add Credential</a>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
    </div>
</div>

{% if credentials %}
<table class="data-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Hostname</th>
            <th>Username</th>
            <th>Port</th>
            <th>OS Type</th>
            <th>Auth Method</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for cred in credentials %}
        <tr>
            <td><strong>{{ cred.name }}</strong></td>
            <td>{{ cred.hostname }}</td>
            <td>{{ cred.username }}</td>
            <td>{{ cred.port }}</td>
            <td>
                <span class="badge badge-{{ 'info' if cred.os_type == 'linux' else 'warning' }}">
                    {{ cred.os_type }}
                </span>
            </td>
            <td>
                {% if cred.has_password %}<span class="badge badge-success">Password</span>{% endif %}
                {% if cred.has_ssh_key %}<span class="badge badge-info">SSH Key</span>{% endif %}
            </td>
            <td class="actions">
                <a href="{{ url_for('admin_edit_credential', cred_id=cred.id) }}" class="btn btn-sm btn-secondary">Edit</a>
                <form method="POST" action="{{ url_for('admin_delete_credential', cred_id=cred.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this credential?');">
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="empty-state">
    <p>No credentials stored yet.</p>
    <a href="{{ url_for('admin_add_credential') }}" class="btn btn-primary">Add Your First Credential</a>
</div>
{% endif %}

<style>
.badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    border-radius: 4px;
    text-transform: uppercase;
}
.badge-info { background: #dbeafe; color: #1e40af; }
.badge-warning { background: #fef3c7; color: #92400e; }
.badge-success { background: #dcfce7; color: #166534; }
.actions { white-space: nowrap; }
.empty-state {
    text-align: center;
    padding: 3rem;
    background: #f8fafc;
    border-radius: 8px;
}
</style>
{% endblock %}
